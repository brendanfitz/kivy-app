#:kivy 1.11.1

<HomeScreen>:
    GridLayout:
        cols: 1
        TopBar:
        GridLayout:
            cols: 2
            padding: 15, 15
            spacing: 20, 20
            Button:
                text: "Create Packing List"
                on_press: root.manager.current = "create_packing_list_screen"
            Button:
                text: "Select Packing List"
                on_press: root.select_packing_list_screen()

<TopBar@GridLayout>:
    cols: 2
    size_hint: 1, 0.2
    padding: 30, 30 
    spacing: 30, 30 
    RelativeLayout:
        Button:
            text: "Home Screen"
            size_hint: 0.5, 0.5
            pos_hint: {'center_x': 0.25, 'center_y': 0.75}
            on_press: root.parent.parent.manager.current = "home_screen"
    RelativeLayout:
        Button:
            text: "Quit"
            size_hint: 0.5, 0.5
            pos_hint: {'center_x': 0.75, 'center_y': 0.75}
            on_press: app.stop()


<CreatePackingListScreen>:
    GridLayout:
        cols: 1
        TopBar:
        GridLayout:
            cols: 1
            Label:
                text: "Create Packing List Screen"
            GridLayout:
                cols: 3
                TextInput:
                    id: trip_name 
                    hint_text: "Trip Name"
                    write_tab: False
                    text: "Europe"
                TextInput:
                    id: start_date
                    hint_text: "Start Date"
                    write_tab: False
                    text: "2020-01-30"
                TextInput:
                    id: end_date
                    hint_text: "End Date"
                    write_tab: False
                    text: "2020-02-08"
            Label:
                id: input_error
                text: ""
            Button:
                text: "Submit"
                on_press: root.create_packing_list(root.ids.trip_name, root.ids.start_date, root.ids.end_date)

<SelectPackingListScreen>:
    GridLayout:
        cols: 1
        TopBar:
        GridLayout:
            cols: 1
            Label:
                text: "Select Packing List"
            GridLayout:
                id: grid
                cols: 2

<UpdatePackingListPopUp>:
    GridLayout:
        cols: 1
        GridLayout:
            cols: 3
            id: item_input
            TextInput:
                id: trip_name
                hint_text: "Trip Name"
                write_tab: False
            TextInput:
                id: start_date
                hint_text: "Start Date"
                write_tab: False
            TextInput:
                id: end_date
                hint_text: "End Date"
                write_tab: False
        GridLayout:
            cols: 2
            Button:
                id: submit_btn
                text: 'Submit'
            Button:
                id: cancel_btn
                text: 'Cancel'

<PackingListScreen>:
    GridLayout:
        cols: 1
        TopBar:
        BoxLayout:
            orientation: "vertical"
            GridLayout:
                size_hint: 1, None
                size_hint_y: None
                height: 25
                cols: 3
                Label:
                    text: "Item Name"
                Label:
                    text: "Count"
                Label:
                    text: "Packed"
            BoxLayout:
                RV:
                    id: dataview
            GridLayout:
                cols: 3
                padding: 15, 15
                spacing: 20, 20
                Button:
                    id: create_item_btn
                    text: "Create Item"
                Button:
                    id: update_packing_list_btn
                    text: "Update Packing List"
                Button:
                    id: delete_packing_list_btn
                    text: "Delete Packing List"
                    on_press: root.delete_packing_list()

<RV>:
    RecycleView:
        viewclass: 'SelectableButton'
        data: [{'text': str(x[2]), 'filename': x[0], 'packing_item': x[1]} for x in root.data_items]
        id: rv_data
        SelectableRecycleGridLayout:
            cols: 3
            default_size: None, dp(26)
            default_size_hint: 1, None
            size_hint_y: None
            height: self.minimum_height
            orientation: 'vertical'
            multiselect: True
            touch_multiselect: True

<PackingListItemPopUp>:
    GridLayout:
        cols: 1
        GridLayout:
            cols: 3
            id: item_input
            TextInput:
                id: item_name
                hint_text: "Item Name"
                write_tab: False
            TextInput:
                id: count 
                hint_text: "Count"
                write_tab: False
            TextInput:
                id: packed 
                hint_text: "Packed"
                write_tab: False
        GridLayout:
            cols: 2
            Button:
                id: submit_btn
                text: 'Submit'
            Button:
                id: cancel_btn
                text: 'Cancel'

<PackingListItemUpdatePopUp>:
    GridLayout:
        cols: 1
        GridLayout:
            cols: 3
            id: item_input
            TextInput:
                id: item_name
                hint_text: "Item Name"
                write_tab: False
            TextInput:
                id: count 
                hint_text: "Count"
                write_tab: False
            TextInput:
                id: packed 
                hint_text: "Packed"
                write_tab: False
        GridLayout:
            cols: 3
            Button:
                id: popup_submit_btn
                text: 'Submit'
            Button:
                id: popup_delete_btn
                text: 'Delete'
            Button:
                id: popup_cancel_btn
                text: 'Cancel'


<RootWidget>:
    HomeScreen:
        name: "home_screen"
    CreatePackingListScreen:
        name: "create_packing_list_screen"
    SelectPackingListScreen:
        name: "select_packing_list_screen"
    PackingListScreen:
        name: "packing_list_screen"