#:kivy 1.11.1

<HomeScreen>:
    GridLayout:
        cols: 1
        TopBar:
        GridLayout:
            cols: 1
            padding: 15, 15
            spacing: 20, 20
            Label:
                text: "Packing List App"
                font_size: "20sp"
            GridLayout:
                cols: 3
                padding: 15, 15
                spacing: 20, 20
                TextInput:
                    id: trip_name 
                    hint_text: "Trip Name"
                    halign: 'center'
                    write_tab: False
                DatePicker:
                    id: start_date
                    hint_text: "Start Date"
                    halign: 'center'
                DatePicker:
                    id: end_date
                    hint_text: "End Date"
                    halign: 'center'

            RelativeLayout:
                Button:
                    text: "Create Packing List"
                    on_press: root.create_packing_list(root.ids.trip_name, root.ids.start_date, root.ids.end_date)
                    size_hint: 0.3, 0.5
                    pos_hint: {'center_x': 0.5, 'center_y': 0.6}
            Label:
                id: input_error
                text: ""
            RelativeLayout:
                HoverableButton:
                    text: "Load Packing List"
                    on_press: root.load_packing_list_screen()
                    size_hint: 0.6, 0.6
                    pos_hint: {'x':.2, 'y':.2}
                    background_color: 1, 1, 1, 0
                    color: 0.1, 0.8, 1, 0.7
                    opacity: 1 if self.hovered else 0.7

<DatePicker>:
    pHint: .3, .3

<TopBar@GridLayout>:
    cols: 2
    size_hint: 1, 0.2
    padding: 30, 30 
    spacing: 30, 30 
    RelativeLayout:
        Button:
            text: "Home Screen"
            size_hint: 0.5, 0.5
            pos_hint: {'center_x': 0.25, 'center_y': 0.75}
            on_press: root.parent.parent.manager.current = "home_screen"
    RelativeLayout:
        Button:
            text: "Quit"
            size_hint: 0.5, 0.5
            pos_hint: {'center_x': 0.75, 'center_y': 0.75}
            on_press: app.stop()


<CreatePackingListScreen>:
    GridLayout:
        cols: 1
        TopBar:

<LoadPackingListScreen>:
    GridLayout:
        cols: 1
        TopBar:
        GridLayout:
            cols: 1
            Label:
                text: "Load Packing List"
                size_hint: 1, 0.1
            GridLayout:
                id: grid
                cols: 1
                padding: 30, 30 
                spacing: 30, 30 

<UpdatePackingListPopUp>:
    GridLayout:
        cols: 1
        GridLayout:
            cols: 3
            id: item_input
            TextInput:
                id: trip_name
                hint_text: "Trip Name"
                write_tab: False
            DatePicker:
                id: start_date
            DatePicker:
                id: end_date
        GridLayout:
            cols: 2
            Button:
                id: submit_btn
                text: 'Submit'
            Button:
                id: cancel_btn
                text: 'Cancel'

<PackingListScreen>:
    GridLayout:
        cols: 1
        TopBar:
        BoxLayout:
            orientation: "vertical"
            GridLayout:
                size_hint: 1, None
                size_hint_y: None
                height: 25
                cols: 3
                Label:
                    text: "Item Name"
                Label:
                    text: "Count"
                Label:
                    text: "Packed"
            BoxLayout:
                RecycleViewDataTable:
                    padding: 0
                    spacing: 0
                    id: dataview
            GridLayout:
                cols: 1
                size_hint: 1, 0.4
                padding: 15, 15
                spacing: 20, 20
                RelativeLayout:
                    Button:
                        id: create_item_btn
                        text: "Create Item"
                        size_hint: 0.3, 0.7
                        pos_hint: {'center_x': 0.5, 'center_y': 0.6}
                GridLayout:
                    cols: 2
                    RelativeLayout:
                        HoverableButton:
                            id: update_packing_list_btn
                            size_hint: .6, .6
                            pos_hint: {'x':.2, 'y':.2}
                            background_color: 1, 1, 1, 0
                            opacity: 1 if self.hovered else 0.7
                            color: 0.1, 0.7, 1, 0.7
                            text: "Update Packing List"
                    RelativeLayout:
                        HoverableButton:
                            id: delete_packing_list_btn
                            size_hint: .6, .6
                            pos_hint: {'x':.2, 'y':.2}
                            background_color: 1, 1, 1, 0
                            opacity: 1 if self.hovered else 0.7
                            color: 1, 0, 0, 0.7
                            text: "Delete Packing List"
                            on_press: root.delete_packing_list()

<RecycleViewDataTable>:
    RecycleView:
        viewclass: 'SelectableButton'
        data: [{'text': str(x[2]), 'filename': x[0], 'packing_item': x[1]} for x in root.data_items]
        id: rv_data
        SelectableRecycleGridLayout:
            cols: 3
            default_size: None, dp(26)
            default_size_hint: 1, None
            size_hint_y: None
            height: self.minimum_height
            orientation: 'vertical'
            multiselect: True
            touch_multiselect: True

<ItemDataButton>:
    background_color: 255, 255, 255, 255 
    color: 0, 0, 0, 1

<PackingListItemPopUp>:
    GridLayout:
        cols: 1
        GridLayout:
            cols: 3
            id: item_input
            TextInput:
                id: item_name
                hint_text: "Item Name"
                write_tab: False
            TextInput:
                id: count 
                hint_text: "Count"
                write_tab: False
            TextInput:
                id: packed 
                hint_text: "Packed"
                write_tab: False
        GridLayout:
            cols: 2
            Button:
                id: submit_btn
                text: 'Submit'
            Button:
                id: cancel_btn
                text: 'Cancel'

<PackingListItemUpdatePopUp>:
    GridLayout:
        cols: 1
        GridLayout:
            cols: 3
            id: item_input
            TextInput:
                id: item_name
                hint_text: "Item Name"
                write_tab: False
            TextInput:
                id: count 
                hint_text: "Count"
                write_tab: False
            TextInput:
                id: packed 
                hint_text: "Packed"
                write_tab: False
        GridLayout:
            cols: 3
            Button:
                id: popup_submit_btn
                text: 'Submit'
            Button:
                id: popup_delete_btn
                text: 'Delete'
            Button:
                id: popup_cancel_btn
                text: 'Cancel'


<RootWidget>:
    HomeScreen:
        name: "home_screen"
    LoadPackingListScreen:
        name: "load_packing_list_screen"
    PackingListScreen:
        name: "packing_list_screen"